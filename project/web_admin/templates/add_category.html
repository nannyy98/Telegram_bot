{% extends "base.html" %}

{% block title %}–î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é - –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å{% endblock %}
{% block page_title %}–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-lg-6">
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0">
                    <i class="fas fa-plus me-2"></i>
                    –ù–æ–≤–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è
                </h5>
            </div>
            <div class="card-body">
                <form method="POST" id="addCategoryForm"> {# –î–æ–±–∞–≤–ª–µ–Ω ID –¥–ª—è —Ñ–æ—Ä–º—ã #}
                    <div class="mb-3">
                        <label for="name" class="form-label">
                            <i class="fas fa-tag me-1"></i>
                            –ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ *
                        </label>
                        <input type="text" class="form-control" id="name" name="name" 
                               placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞" required autofocus> {# –î–æ–±–∞–≤–ª–µ–Ω autofocus #}
                        <div class="invalid-feedback">
                            –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏.
                        </div>
                    </div>
                    
                    <div class="mb-3">
                        <label for="description" class="form-label">
                            <i class="fas fa-align-left me-1"></i>
                            –û–ø–∏—Å–∞–Ω–∏–µ
                        </label>
                        <textarea class="form-control" id="description" name="description" rows="3"
                                  placeholder="–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏"></textarea>
                    </div>
                    
                    <div class="mb-3">
                        <label for="emoji" class="form-label">
                            <i class="fas fa-smile me-1"></i>
                            –≠–º–æ–¥–∑–∏
                        </label>
                        <input type="text" class="form-control" id="emoji" name="emoji" 
                               placeholder="üì±" maxlength="2">
                        <div class="form-text">
                            –í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–¥—Ö–æ–¥—è—â–∏–π —ç–º–æ–¥–∑–∏ –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (–º–∞–∫—Å. 2 —Å–∏–º–≤–æ–ª–∞).
                        </div>
                    </div>
                    
                    <div class="d-flex gap-2">
                        <button type="submit" class="btn btn-success">
                            <i class="fas fa-save me-2"></i>
                            –°–æ–∑–¥–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é
                        </button>
                        <a href="{{ url_for('categories') }}" class="btn btn-outline-secondary">
                            <i class="fas fa-arrow-left me-2"></i>
                            –û—Ç–º–µ–Ω–∞
                        </a>
                    </div>
                </form>
            </div>
        </div>
        
        <!-- –ë—ã—Å—Ç—Ä—ã–µ —à–∞–±–ª–æ–Ω—ã -->
        <div class="card mt-4">
            <div class="card-header">
                <h6 class="mb-0">
                    <i class="fas fa-magic me-1"></i>
                    –ë—ã—Å—Ç—Ä—ã–µ —à–∞–±–ª–æ–Ω—ã
                </h6>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-6 mb-2">
                        <button type="button" class="btn btn-outline-primary btn-sm w-100 template-btn" {# –î–æ–±–∞–≤–ª–µ–Ω –∫–ª–∞—Å—Å template-btn #}
                                onclick="fillTemplate('electronics')">
                            üì± –≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞
                        </button>
                    </div>
                    <div class="col-6 mb-2">
                        <button type="button" class="btn btn-outline-success btn-sm w-100 template-btn" {# –î–æ–±–∞–≤–ª–µ–Ω –∫–ª–∞—Å—Å template-btn #}
                                onclick="fillTemplate('clothing')">
                            üëï –û–¥–µ–∂–¥–∞
                        </button>
                    </div>
                    <div class="col-6 mb-2">
                        <button type="button" class="btn btn-outline-info btn-sm w-100 template-btn" {# –î–æ–±–∞–≤–ª–µ–Ω –∫–ª–∞—Å—Å template-btn #}
                                onclick="fillTemplate('home')">
                            üè† –î–æ–º –∏ —Å–∞–¥
                        </button>
                    </div>
                    <div class="col-6 mb-2">
                        <button type="button" class="btn btn-outline-warning btn-sm w-100 template-btn" {# –î–æ–±–∞–≤–ª–µ–Ω –∫–ª–∞—Å—Å template-btn #}
                                onclick="fillTemplate('beauty')">
                            üíÑ –ö—Ä–∞—Å–æ—Ç–∞
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
function fillTemplate(type) {
    const templates = {
        'electronics': {
            name: '–≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞',
            description: '–°–º–∞—Ä—Ç—Ñ–æ–Ω—ã, –Ω–æ—É—Ç–±—É–∫–∏, –ø–ª–∞–Ω—à–µ—Ç—ã –∏ –¥—Ä—É–≥–∏–µ –≥–∞–¥–∂–µ—Ç—ã',
            emoji: 'üì±'
        },
        'clothing': {
            name: '–û–¥–µ–∂–¥–∞',
            description: '–ú—É–∂—Å–∫–∞—è –∏ –∂–µ–Ω—Å–∫–∞—è –æ–¥–µ–∂–¥–∞ –≤—Å–µ—Ö —Ä–∞–∑–º–µ—Ä–æ–≤',
            emoji: 'üëï'
        },
        'home': {
            name: '–î–æ–º –∏ —Å–∞–¥',
            description: '–¢–æ–≤–∞—Ä—ã –¥–ª—è –¥–æ–º–∞, –∫—É—Ö–Ω–∏ –∏ —Å–∞–¥–æ–≤–æ–¥—Å—Ç–≤–∞',
            emoji: 'üè†'
        },
        'beauty': {
            name: '–ö—Ä–∞—Å–æ—Ç–∞ –∏ –∑–¥–æ—Ä–æ–≤—å–µ',
            description: '–ö–æ—Å–º–µ—Ç–∏–∫–∞, –ø–∞—Ä—Ñ—é–º–µ—Ä–∏—è –∏ —Ç–æ–≤–∞—Ä—ã –¥–ª—è –∑–¥–æ—Ä–æ–≤—å—è',
            emoji: 'üíÑ'
        }
    };
    
    const template = templates[type];
    if (template) {
        document.getElementById('name').value = template.name;
        document.getElementById('description').value = template.description;
        document.getElementById('emoji').value = template.emoji;

        // –î–æ–±–∞–≤–ª—è–µ–º –≤–∏–∑—É–∞–ª—å–Ω—É—é –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å –ø–æ—Å–ª–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è
        document.getElementById('name').classList.add('is-valid');
        document.getElementById('description').classList.add('is-valid');
        document.getElementById('emoji').classList.add('is-valid');

        // –£–±–∏—Ä–∞–µ–º –∫–ª–∞—Å—Å is-valid —á–µ—Ä–µ–∑ –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –≤—Ä–µ–º—è
        setTimeout(() => {
            document.getElementById('name').classList.remove('is-valid');
            document.getElementById('description').classList.remove('is-valid');
            document.getElementById('emoji').classList.remove('is-valid');
        }, 2000); // 2 —Å–µ–∫—É–Ω–¥—ã
    } else {
        console.warn(`–®–∞–±–ª–æ–Ω —Ç–∏–ø–∞ "${type}" –Ω–µ –Ω–∞–π–¥–µ–Ω.`);
    }
}

document.addEventListener('DOMContentLoaded', function() {
    // –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º—ã –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ
    const form = document.getElementById('addCategoryForm');
    form.addEventListener('submit', function(event) {
        if (!form.checkValidity()) {
            event.preventDefault();
            event.stopPropagation();
        }
        form.classList.add('was-validated');
    }, false);

    // –î–æ–±–∞–≤–ª—è–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –¥–ª—è –∫–Ω–æ–ø–æ–∫ –±—ã—Å—Ç—Ä—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤
    const templateButtons = document.querySelectorAll('.template-btn');
    templateButtons.forEach(button => {
        button.addEventListener('click', function() {
            this.classList.add('btn-animated'); // –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏
            setTimeout(() => {
                this.classList.remove('btn-animated'); // –£–¥–∞–ª—è–µ–º –∫–ª–∞—Å—Å –ø–æ—Å–ª–µ –∞–Ω–∏–º–∞—Ü–∏–∏
            }, 300); // –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∞–Ω–∏–º–∞—Ü–∏–∏
        });
    });
});
</script>

<style>
/* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏ –∫–Ω–æ–ø–æ–∫ —à–∞–±–ª–æ–Ω–æ–≤ */
.template-btn {
    transition: all 0.2s ease-in-out;
}

.template-btn.btn-animated {
    transform: scale(1.05);
    box-shadow: 0 0 15px rgba(0, 123, 255, 0.5); /* –ü—Ä–∏–º–µ—Ä —Ç–µ–Ω–∏ */
}

/* –°—Ç–∏–ª–∏ –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ Bootstrap */
.form-control.is-valid {
    border-color: #28a745;
    padding-right: calc(1.5em + 0.75rem);
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8'%3e%3cpath fill='%2328a745' d='M2.343 6.707l-1.414-1.414 1.414-1.414 1.414 1.414 2.828-2.828 1.414 1.414-4.242 4.242z'/%3e%3c/svg%3e");
    background-repeat: no-repeat;
    background-position: right calc(0.375em + 0.1875rem) center;
    background-size: calc(0.75em + 0.375rem) calc(0.75em + 0.375rem);
}

.form-control.is-invalid {
    border-color: #dc3545;
    padding-right: calc(1.5em + 0.75rem);
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 12' width='12' height='12' fill='none' stroke='%23dc3545'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3e%3c/svg%3e");
    background-repeat: no-repeat;
    background-position: right calc(0.375em + 0.1875rem) center;
    background-size: calc(0.75em + 0.375rem) calc(0.75em + 0.375rem);
}
</style>
{% endblock %}